{"id":"0Kt0","dependencies":[{"name":"/home/john/workspace/Valory2/tsconfig.json","includedInParent":true,"mtime":1531152310742},{"name":"/home/john/workspace/Valory2/package.json","includedInParent":true,"mtime":1533664046105},{"name":"/home/john/workspace/Valory2/.babelrc","includedInParent":true,"mtime":1533664058125},{"name":"./helpers","loc":{"line":19,"column":26},"parent":"/home/john/workspace/Valory2/src/lib/config.ts","resolved":"/home/john/workspace/Valory2/src/lib/helpers.ts"}],"generated":{"js":"var $Kt0$export$Config,$Kt0$exports={};$parcel$require(\"0Kt0\",\"bluebird\"),$parcel$require(\"0Kt0\",\"bluebird\");var $Kt0$var$__importStar=$Kt0$exports&&$Kt0$exports.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t},$Kt0$var$__importDefault=$Kt0$exports&&$Kt0$exports.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty($Kt0$exports,\"__esModule\",{value:!0});const $Kt0$var$path=$Kt0$var$__importStar(require(\"path\")),$Kt0$var$fs_1=require(\"fs\"),$Kt0$var$thread_spin_1=require(\"thread-spin\"),$Kt0$var$semver_1=require(\"semver\"),$Kt0$var$child_process_1=require(\"child_process\"),$Kt0$var$chalk_1=$Kt0$var$__importDefault(require(\"chalk\")),$Kt0$var$helpers_1=$parcel$require(\"0Kt0\",\"./helpers\");var $Kt0$export$CLI_MODE_FLAG=\"VALORY_CLI\";$Kt0$exports.CLI_MODE_FLAG=$Kt0$export$CLI_MODE_FLAG;var $Kt0$var$Config,$Kt0$export$VALORY_ROOT=\"VALORY_ROOT\";$Kt0$exports.VALORY_ROOT=$Kt0$export$VALORY_ROOT,function(e){let t=(r=$Kt0$import$_coroutine(function*(){const t=/version \\\"([A-Za-z0-9\\_\\.]*?)\\\"/g;console.log($Kt0$var$chalk_1.default.bold(\"Requirements\")),yield $Kt0$import$_resolve(e.Spinner.start(\"Node 8+\")),$Kt0$var$semver_1.gt($Kt0$var$semver_1.coerce(process.version),\"8.0.0\")||(yield $Kt0$import$_resolve($Kt0$var$helpers_1.spinnerFail(\"Node version too low\",null))),yield $Kt0$import$_resolve(e.Spinner.succeed($Kt0$var$chalk_1.default.green(`Node ${process.version}`))),yield $Kt0$import$_resolve(e.Spinner.start(\"Java 1.7+\"));try{const r=$Kt0$var$child_process_1.spawnSync(\"java\",[\"-version\"]).stderr,$=t.exec(r.toString())[1];$Kt0$var$semver_1.gt($Kt0$var$semver_1.coerce($),$Kt0$var$semver_1.coerce(\"1.7\"))||(yield $Kt0$import$_resolve($Kt0$var$helpers_1.spinnerFail(\"Java version too low\",null))),yield $Kt0$import$_resolve(e.Spinner.succeed($Kt0$var$chalk_1.default.green(`Java ${$}`)))}catch(e){yield $Kt0$import$_resolve($Kt0$var$helpers_1.spinnerFail(\"Java installation missing or broken\",e))}console.log(\"\")}),function(){return r.apply(this,arguments)});var r;e.CONFIG_FILE=\"valory.json\",e.SWAGGER_FILE=\"swagger.json\",e.COMPILED_SWAGGER_FILE=\".compswag.js\",e.GENERATED_ROUTES_FILE=\"generatedRoutes.ts\",e.COMPILED_ROUTES_FILE=\"generatedRoutes.js\",e.RootPath=\"\",e.CompilerMode=!1,e.Loaded=!1,e.ConfigPath=\"\",e.SwaggerPath=\"\",e.CompSwagPath=\"\",e.PackageJSON=null,e.ValoryVersion=\"\",e.GeneratedRoutePath=\"\",e.SourceRoutePath=\"\",e.PackageJSONPath=\"\",e.load=function(t=!0,r){if(e.Loaded)return;e.CompilerMode=\"TRUE\"===process.env.VALORYCOMPILER,e.Loaded=!0;const $=process.env[$Kt0$exports.VALORY_ROOT];if(r=null!=$?$:r||__dirname.split(\"node_modules\")[0],e.RootPath=r,process.env[$Kt0$exports.VALORY_ROOT]=e.RootPath,e.ConfigPath=`${e.RootPath}/${e.CONFIG_FILE}`,e.SwaggerPath=`${e.RootPath}/${e.SWAGGER_FILE}`,e.CompSwagPath=`${e.RootPath}/${e.COMPILED_SWAGGER_FILE}`,e.PackageJSONPath=`${e.RootPath}/package.json`,e.CompilerMode&&(e.Spinner=new $Kt0$var$thread_spin_1.ThreadSpinner(void 0,\"test\"===process.env.NODE_ENV),e.ValoryVersion=require($Kt0$var$path.join(__dirname,\"../../package.json\")).version,e.PackageJSON=require(e.PackageJSONPath)),t){try{e.ConfigData=JSON.parse($Kt0$var$fs_1.readFileSync(e.ConfigPath,{encoding:\"utf8\"}))}catch(t){throw Error(\"Valory config is missing from: \"+e.ConfigPath)}e.ConfigData.entrypoint=$Kt0$var$path.resolve($Kt0$var$path.join(e.RootPath),e.ConfigData.entrypoint),e.GeneratedRoutePath=`${$Kt0$var$path.resolve($Kt0$var$path.dirname(e.ConfigData.entrypoint))}/${e.COMPILED_ROUTES_FILE}`,e.ConfigData.sourceEntrypoint&&(e.ConfigData.sourceEntrypoint=$Kt0$var$path.resolve($Kt0$var$path.join(e.RootPath),e.ConfigData.sourceEntrypoint),e.SourceRoutePath=`${$Kt0$var$path.resolve($Kt0$var$path.dirname(e.ConfigData.sourceEntrypoint))}/${e.GENERATED_ROUTES_FILE}`)}},e.checkRequirements=t}($Kt0$var$Config=$Kt0$exports.Config||($Kt0$export$Config={},$Kt0$exports.Config=$Kt0$export$Config));"},"hash":"81c3cc2dd51fc59fa0d5ba5b92440f09","cacheData":{"env":{},"imports":{"$Kt0$import$_coroutine":["bluebird","coroutine"],"$Kt0$import$_resolve":["bluebird","resolve"]},"exports":{"CLI_MODE_FLAG":"$Kt0$export$CLI_MODE_FLAG","VALORY_ROOT":"$Kt0$export$VALORY_ROOT","Config":"$Kt0$export$Config"},"wildcards":[],"isCommonJS":true}}