{"id":"QHSc","dependencies":[{"name":"/home/john/workspace/Valory2/tsconfig.json","includedInParent":true,"mtime":1533665526367},{"name":"/home/john/workspace/Valory2/package.json","includedInParent":true,"mtime":1533666443092},{"name":"/home/john/workspace/Valory2/.babelrc","includedInParent":true,"mtime":1533664058125},{"name":"./compiler","loc":{"line":18,"column":35},"parent":"/home/john/workspace/Valory2/src/compiler/compileRunner.ts","resolved":"/home/john/workspace/Valory2/src/compiler/compiler.ts"},{"name":"../server/valoryheaders","loc":{"line":11,"column":32},"parent":"/home/john/workspace/Valory2/src/compiler/compileRunner.ts","resolved":"/home/john/workspace/Valory2/src/server/valoryheaders.ts"},{"name":"../lib/config","loc":{"line":15,"column":25},"parent":"/home/john/workspace/Valory2/src/compiler/compileRunner.ts","resolved":"/home/john/workspace/Valory2/src/lib/config.ts"}],"generated":{"js":"\"use strict\";var e=require(\"bluebird\");let r=(()=>{var r=(0,e.coroutine)(function*(r,i,a,f,d,p){const y=yield(0,e.resolve)(require(\"./compiler\").compile(r,d)),g=t({level:process.env[n.VALORYLOGGERVAR]||\"info\",prettyPrint:\"true\"===process.env[n.VALORYPRETTYLOGGERVAR]});g.debug(\"Saving compiled swagger to: \"+i),o.writeFileSync(i,y.module);const v=s.cloneDeep(r);if(v.paths=s.omit(v.paths,f),null!=p){o.existsSync(p)||o.mkdirSync(p);const e=Buffer.from(u()()).toString(\"base64\");o.mkdirSync(c.join(p,e)),g.info(\"Placing additional debug artifacts in:\",c.join(p,e));for(const r of Object.keys(y.debugArtifacts)){const i=y.debugArtifacts[r];\"string\"==typeof i&&o.writeFileSync(c.join(p,e,r+\".js\"),i)}}o.writeFileSync(l.Config.SwaggerPath,JSON.stringify(v)),o.writeFileSync(c.join(a,l.Config.SWAGGER_FILE),JSON.stringify(v))});return function(e,i,t,n,o,s){return r.apply(this,arguments)}})();var i=function(e){if(e&&e.__esModule)return e;var r={};if(null!=e)for(var i in e)Object.hasOwnProperty.call(e,i)&&(r[i]=e[i]);return r.default=e,r};Object.defineProperty(exports,\"__esModule\",{value:!0});const t=require(\"pino\"),n=require(\"../server/valoryheaders\"),o=require(\"fs\"),s=require(\"lodash\"),c=i(require(\"path\")),l=require(\"../lib/config\"),u=require(\"hyperid\");exports.compileAndSave=r;","map":{"mappings":[{"source":"compiler/compileRunner.ts","name":null,"original":{"line":12,"column":0},"generated":{"line":1,"column":0}},{"source":"compiler/compileRunner.ts","name":null,"original":{"line":12,"column":0},"generated":{"line":1,"column":13}},{"source":"compiler/compileRunner.ts","name":null,"original":{"line":12,"column":0},"generated":{"line":1,"column":17}},{"source":"compiler/compileRunner.ts","name":null,"original":{"line":12,"column":0},"generated":{"line":1,"column":19}},{"source":"compiler/compileRunner.ts","name":null,"original":{"line":12,"column":0},"generated":{"line":1,"column":27}},{"source":"compiler/compileRunner.ts","name":null,"original":{"line":12,"column":0},"generated":{"line":1,"column":39}},{"source":"compiler/compileRunner.ts","name":null,"original":{"line":12,"column":0},"generated":{"line":1,"column":43}},{"source":"compiler/compileRunner.ts","name":null,"original":{"line":12,"column":0},"generated":{"line":1,"column":45}},{"source":"compiler/compileRunner.ts","name":null,"original":{"line":12,"column":7},"generated":{"line":1,"column":51}},{"source":"compiler/compileRunner.ts","name":null,"original":{"line":12,"column":7},"generated":{"line":1,"column":55}},{"source":"compiler/compileRunner.ts","name":null,"original":{"line":12,"column":7},"generated":{"line":1,"column":58}},{"source":"compiler/compileRunner.ts","name":null,"original":{"line":12,"column":7},"generated":{"line":1,"column":60}},{"source":"compiler/compileRunner.ts","name":null,"original":{"line":12,"column":7},"generated":{"line":1,"column":62}},{"source":"compiler/compileRunner.ts","name":null,"original":{"line":12,"column":7},"generated":{"line":1,"column":73}},{"source":"compiler/compileRunner.ts","name":null,"original":{"line":12,"column":37},"generated":{"line":1,"column":83}},{"source":"compiler/compileRunner.ts","name":null,"original":{"line":12,"column":60},"generated":{"line":1,"column":85}},{"source":"compiler/compileRunner.ts","name":null,"original":{"line":12,"column":81},"generated":{"line":1,"column":87}},{"source":"compiler/compileRunner.ts","name":null,"original":{"line":13,"column":6},"generated":{"line":1,"column":89}},{"source":"compiler/compileRunner.ts","name":null,"original":{"line":13,"column":35},"generated":{"line":1,"column":91}},{"source":"compiler/compileRunner.ts","name":null,"original":{"line":13,"column":70},"generated":{"line":1,"column":93}},{"source":"compiler/compileRunner.ts","name":null,"original":{"line":14,"column":10},"generated":{"line":1,"column":96}},{"source":"compiler/compileRunner.ts","name":null,"original":{"line":14,"column":10},"generated":{"line":1,"column":102}},{"source":"compiler/compileRunner.ts","name":null,"original":{"line":14,"column":27},"generated":{"line":1,"column":110}},{"source":"compiler/compileRunner.ts","name":null,"original":{"line":14,"column":27},"generated":{"line":1,"column":112}},{"source":"compiler/compileRunner.ts","name":null,"original":{"line":14,"column":27},"generated":{"line":1,"column":114}},{"source":"compiler/compileRunner.ts","name":null,"original":{"line":14,"column":27},"generated":{"line":1,"column":123}},{"source":"compiler/compileRunner.ts","name":null,"original":{"line":14,"column":35},"generated":{"line":1,"column":131}},{"source":"compiler/compileRunner.ts","name":null,"original":{"line":14,"column":49},"generated":{"line":1,"column":145}},{"source":"compiler/compileRunner.ts","name":null,"original":{"line":14,"column":57},"generated":{"line":1,"column":153}},{"source":"compiler/compileRunner.ts","name":null,"original":{"line":14,"column":66},"generated":{"line":1,"column":155}},{"source":"compiler/compileRunner.ts","name":null,"original":{"line":15,"column":10},"generated":{"line":1,"column":159}},{"source":"compiler/compileRunner.ts","name":null,"original":{"line":15,"column":19},"generated":{"line":1,"column":161}},{"source":"compiler/compileRunner.ts","name":null,"original":{"line":15,"column":21},"generated":{"line":1,"column":163}},{"source":"compiler/compileRunner.ts","name":null,"original":{"line":16,"column":15},"generated":{"line":1,"column":164}},{"source":"compiler/compileRunner.ts","name":null,"original":{"line":16,"column":15},"generated":{"line":1,"column":170}},{"source":"compiler/compileRunner.ts","name":null,"original":{"line":16,"column":23},"generated":{"line":1,"column":178}},{"source":"compiler/compileRunner.ts","name":null,"original":{"line":16,"column":27},"generated":{"line":1,"column":182}},{"source":"compiler/compileRunner.ts","name":null,"original":{"line":16,"column":27},"generated":{"line":1,"column":184}},{"source":"compiler/compileRunner.ts","name":null,"original":{"line":16,"column":47},"generated":{"line":1,"column":202}},{"source":"compiler/compileRunner.ts","name":null,"original":{"line":17,"column":21},"generated":{"line":1,"column":209}},{"source":"compiler/compileRunner.ts","name":null,"original":{"line":17,"column":60},"generated":{"line":1,"column":221}},{"source":"compiler/compileRunner.ts","name":null,"original":{"line":17,"column":21},"generated":{"line":1,"column":230}},{"source":"compiler/compileRunner.ts","name":null,"original":{"line":17,"column":29},"generated":{"line":1,"column":238}},{"source":"compiler/compileRunner.ts","name":null,"original":{"line":17,"column":33},"generated":{"line":1,"column":242}},{"source":"compiler/compileRunner.ts","name":null,"original":{"line":17,"column":33},"generated":{"line":1,"column":244}},{"source":"compiler/compileRunner.ts","name":null,"original":{"line":19,"column":11},"generated":{"line":1,"column":269}},{"source":"compiler/compileRunner.ts","name":null,"original":{"line":19,"column":11},"generated":{"line":1,"column":271}},{"source":"compiler/compileRunner.ts","name":null,"original":{"line":19,"column":17},"generated":{"line":1,"column":277}},{"source":"compiler/compileRunner.ts","name":null,"original":{"line":19,"column":50},"generated":{"line":1,"column":308}},{"source":"compiler/compileRunner.ts","name":null,"original":{"line":20,"column":4},"generated":{"line":1,"column":311}},{"source":"compiler/compileRunner.ts","name":null,"original":{"line":20,"column":4},"generated":{"line":1,"column":313}},{"source":"compiler/compileRunner.ts","name":null,"original":{"line":20,"column":18},"generated":{"line":1,"column":327}},{"source":"compiler/compileRunner.ts","name":null,"original":{"line":20,"column":31},"generated":{"line":1,"column":329}},{"source":"compiler/compileRunner.ts","name":null,"original":{"line":20,"column":40},"generated":{"line":1,"column":331}},{"source":"compiler/compileRunner.ts","name":null,"original":{"line":21,"column":10},"generated":{"line":1,"column":339}},{"source":"compiler/compileRunner.ts","name":null,"original":{"line":21,"column":10},"generated":{"line":1,"column":345}},{"source":"compiler/compileRunner.ts","name":null,"original":{"line":21,"column":24},"generated":{"line":1,"column":347}},{"source":"compiler/compileRunner.ts","name":null,"original":{"line":21,"column":24},"generated":{"line":1,"column":349}},{"source":"compiler/compileRunner.ts","name":null,"original":{"line":21,"column":34},"generated":{"line":1,"column":359}},{"source":"compiler/compileRunner.ts","name":null,"original":{"line":23,"column":8},"generated":{"line":1,"column":362}},{"source":"compiler/compileRunner.ts","name":null,"original":{"line":22,"column":16},"generated":{"line":1,"column":365}},{"source":"compiler/compileRunner.ts","name":null,"original":{"line":22,"column":16},"generated":{"line":1,"column":367}},{"source":"compiler/compileRunner.ts","name":null,"original":{"line":22,"column":24},"generated":{"line":1,"column":373}},{"source":"compiler/compileRunner.ts","name":null,"original":{"line":22,"column":24},"generated":{"line":1,"column":375}},{"source":"compiler/compileRunner.ts","name":null,"original":{"line":22,"column":29},"generated":{"line":1,"column":380}},{"source":"compiler/compileRunner.ts","name":null,"original":{"line":22,"column":41},"generated":{"line":1,"column":382}},{"source":"compiler/compileRunner.ts","name":null,"original":{"line":22,"column":48},"generated":{"line":1,"column":388}},{"source":"compiler/compileRunner.ts","name":null,"original":{"line":23,"column":21},"generated":{"line":1,"column":391}},{"source":"compiler/compileRunner.ts","name":null,"original":{"line":23,"column":8},"generated":{"line":1,"column":397}},{"source":"compiler/compileRunner.ts","name":null,"original":{"line":23,"column":27},"generated":{"line":1,"column":399}},{"source":"compiler/compileRunner.ts","name":null,"original":{"line":24,"column":13},"generated":{"line":1,"column":400}},{"source":"compiler/compileRunner.ts","name":null,"original":{"line":24,"column":13},"generated":{"line":1,"column":402}},{"source":"compiler/compileRunner.ts","name":null,"original":{"line":24,"column":24},"generated":{"line":1,"column":413}},{"source":"compiler/compileRunner.ts","name":null,"original":{"line":25,"column":12},"generated":{"line":1,"column":417}},{"source":"compiler/compileRunner.ts","name":null,"original":{"line":25,"column":12},"generated":{"line":1,"column":419}},{"source":"compiler/compileRunner.ts","name":null,"original":{"line":25,"column":22},"generated":{"line":1,"column":429}},{"source":"compiler/compileRunner.ts","name":null,"original":{"line":27,"column":14},"generated":{"line":1,"column":432}},{"source":"compiler/compileRunner.ts","name":null,"original":{"line":27,"column":14},"generated":{"line":1,"column":438}},{"source":"compiler/compileRunner.ts","name":null,"original":{"line":27,"column":19},"generated":{"line":1,"column":440}},{"source":"compiler/compileRunner.ts","name":null,"original":{"line":27,"column":26},"generated":{"line":1,"column":447}},{"source":"compiler/compileRunner.ts","name":null,"original":{"line":27,"column":31},"generated":{"line":1,"column":452}},{"source":"compiler/compileRunner.ts","name":null,"original":{"line":27,"column":31},"generated":{"line":1,"column":455}},{"source":"compiler/compileRunner.ts","name":null,"original":{"line":27,"column":44},"generated":{"line":1,"column":459}},{"source":"compiler/compileRunner.ts","name":null,"original":{"line":27,"column":53},"generated":{"line":1,"column":468}},{"source":"compiler/compileRunner.ts","name":null,"original":{"line":28,"column":8},"generated":{"line":1,"column":478}},{"source":"compiler/compileRunner.ts","name":null,"original":{"line":28,"column":8},"generated":{"line":1,"column":480}},{"source":"compiler/compileRunner.ts","name":null,"original":{"line":28,"column":18},"generated":{"line":1,"column":490}},{"source":"compiler/compileRunner.ts","name":null,"original":{"line":28,"column":23},"generated":{"line":1,"column":492}},{"source":"compiler/compileRunner.ts","name":null,"original":{"line":28,"column":28},"generated":{"line":1,"column":497}},{"source":"compiler/compileRunner.ts","name":null,"original":{"line":28,"column":39},"generated":{"line":1,"column":499}},{"source":"compiler/compileRunner.ts","name":null,"original":{"line":29,"column":15},"generated":{"line":1,"column":503}},{"source":"compiler/compileRunner.ts","name":null,"original":{"line":29,"column":15},"generated":{"line":1,"column":505}},{"source":"compiler/compileRunner.ts","name":null,"original":{"line":29,"column":20},"generated":{"line":1,"column":510}},{"source":"compiler/compileRunner.ts","name":null,"original":{"line":29,"column":62},"generated":{"line":1,"column":551}},{"source":"compiler/compileRunner.ts","name":null,"original":{"line":29,"column":67},"generated":{"line":1,"column":553}},{"source":"compiler/compileRunner.ts","name":null,"original":{"line":29,"column":72},"generated":{"line":1,"column":558}},{"source":"compiler/compileRunner.ts","name":null,"original":{"line":29,"column":83},"generated":{"line":1,"column":560}},{"source":"compiler/compileRunner.ts","name":null,"original":{"line":30,"column":13},"generated":{"line":1,"column":564}},{"source":"compiler/compileRunner.ts","name":null,"original":{"line":30,"column":13},"generated":{"line":1,"column":568}},{"source":"compiler/compileRunner.ts","name":null,"original":{"line":30,"column":19},"generated":{"line":1,"column":574}},{"source":"compiler/compileRunner.ts","name":null,"original":{"line":30,"column":27},"generated":{"line":1,"column":579}},{"source":"compiler/compileRunner.ts","name":null,"original":{"line":30,"column":34},"generated":{"line":1,"column":586}},{"source":"compiler/compileRunner.ts","name":null,"original":{"line":30,"column":39},"generated":{"line":1,"column":591}},{"source":"compiler/compileRunner.ts","name":null,"original":{"line":30,"column":48},"generated":{"line":1,"column":593}},{"source":"compiler/compileRunner.ts","name":null,"original":{"line":30,"column":65},"generated":{"line":1,"column":609}},{"source":"compiler/compileRunner.ts","name":null,"original":{"line":31,"column":18},"generated":{"line":1,"column":610}},{"source":"compiler/compileRunner.ts","name":null,"original":{"line":31,"column":18},"generated":{"line":1,"column":616}},{"source":"compiler/compileRunner.ts","name":null,"original":{"line":31,"column":25},"generated":{"line":1,"column":618}},{"source":"compiler/compileRunner.ts","name":null,"original":{"line":31,"column":34},"generated":{"line":1,"column":620}},{"source":"compiler/compileRunner.ts","name":null,"original":{"line":31,"column":49},"generated":{"line":1,"column":635}},{"source":"compiler/compileRunner.ts","name":null,"original":{"line":32,"column":32},"generated":{"line":1,"column":638}},{"source":"compiler/compileRunner.ts","name":null,"original":{"line":32,"column":23},"generated":{"line":1,"column":655}},{"source":"compiler/compileRunner.ts","name":null,"original":{"line":33,"column":16},"generated":{"line":1,"column":658}},{"source":"compiler/compileRunner.ts","name":null,"original":{"line":33,"column":16},"generated":{"line":1,"column":660}},{"source":"compiler/compileRunner.ts","name":null,"original":{"line":33,"column":30},"generated":{"line":1,"column":674}},{"source":"compiler/compileRunner.ts","name":null,"original":{"line":33,"column":35},"generated":{"line":1,"column":676}},{"source":"compiler/compileRunner.ts","name":null,"original":{"line":33,"column":40},"generated":{"line":1,"column":681}},{"source":"compiler/compileRunner.ts","name":null,"original":{"line":33,"column":51},"generated":{"line":1,"column":683}},{"source":"compiler/compileRunner.ts","name":null,"original":{"line":33,"column":55},"generated":{"line":1,"column":685}},{"source":"compiler/compileRunner.ts","name":null,"original":{"line":33,"column":62},"generated":{"line":1,"column":687}},{"source":"compiler/compileRunner.ts","name":null,"original":{"line":33,"column":70},"generated":{"line":1,"column":694}},{"source":"compiler/compileRunner.ts","name":null,"original":{"line":37,"column":4},"generated":{"line":1,"column":698}},{"source":"compiler/compileRunner.ts","name":null,"original":{"line":37,"column":4},"generated":{"line":1,"column":700}},{"source":"compiler/compileRunner.ts","name":null,"original":{"line":37,"column":18},"generated":{"line":1,"column":714}},{"source":"compiler/compileRunner.ts","name":null,"original":{"line":37,"column":18},"generated":{"line":1,"column":716}},{"source":"compiler/compileRunner.ts","name":null,"original":{"line":37,"column":25},"generated":{"line":1,"column":723}},{"source":"compiler/compileRunner.ts","name":null,"original":{"line":37,"column":38},"generated":{"line":1,"column":735}},{"source":"compiler/compileRunner.ts","name":null,"original":{"line":37,"column":43},"generated":{"line":1,"column":740}},{"source":"compiler/compileRunner.ts","name":null,"original":{"line":37,"column":53},"generated":{"line":1,"column":750}},{"source":"compiler/compileRunner.ts","name":null,"original":{"line":38,"column":4},"generated":{"line":1,"column":754}},{"source":"compiler/compileRunner.ts","name":null,"original":{"line":38,"column":4},"generated":{"line":1,"column":756}},{"source":"compiler/compileRunner.ts","name":null,"original":{"line":38,"column":18},"generated":{"line":1,"column":770}},{"source":"compiler/compileRunner.ts","name":null,"original":{"line":38,"column":23},"generated":{"line":1,"column":772}},{"source":"compiler/compileRunner.ts","name":null,"original":{"line":38,"column":28},"generated":{"line":1,"column":777}},{"source":"compiler/compileRunner.ts","name":null,"original":{"line":38,"column":44},"generated":{"line":1,"column":779}},{"source":"compiler/compileRunner.ts","name":null,"original":{"line":38,"column":44},"generated":{"line":1,"column":781}},{"source":"compiler/compileRunner.ts","name":null,"original":{"line":38,"column":51},"generated":{"line":1,"column":788}},{"source":"compiler/compileRunner.ts","name":null,"original":{"line":38,"column":66},"generated":{"line":1,"column":802}},{"source":"compiler/compileRunner.ts","name":null,"original":{"line":38,"column":71},"generated":{"line":1,"column":807}},{"source":"compiler/compileRunner.ts","name":null,"original":{"line":38,"column":81},"generated":{"line":1,"column":817}},{"source":"compiler/compileRunner.ts","name":null,"original":{"line":12,"column":12},"generated":{"line":1,"column":823}},{"source":"compiler/compileRunner.ts","name":null,"original":{"line":12,"column":12},"generated":{"line":1,"column":830}},{"source":"compiler/compileRunner.ts","name":null,"original":{"line":12,"column":12},"generated":{"line":1,"column":839}},{"source":"compiler/compileRunner.ts","name":null,"original":{"line":12,"column":12},"generated":{"line":1,"column":841}},{"source":"compiler/compileRunner.ts","name":null,"original":{"line":12,"column":12},"generated":{"line":1,"column":843}},{"source":"compiler/compileRunner.ts","name":null,"original":{"line":12,"column":12},"generated":{"line":1,"column":845}},{"source":"compiler/compileRunner.ts","name":null,"original":{"line":12,"column":12},"generated":{"line":1,"column":847}},{"source":"compiler/compileRunner.ts","name":null,"original":{"line":12,"column":12},"generated":{"line":1,"column":849}},{"source":"compiler/compileRunner.ts","name":null,"original":{"line":12,"column":0},"generated":{"line":1,"column":852}},{"source":"compiler/compileRunner.ts","name":null,"original":{"line":12,"column":0},"generated":{"line":1,"column":859}},{"source":"compiler/compileRunner.ts","name":null,"original":{"line":12,"column":0},"generated":{"line":1,"column":861}},{"source":"compiler/compileRunner.ts","name":null,"original":{"line":12,"column":0},"generated":{"line":1,"column":867}},{"source":"compiler/compileRunner.ts","name":null,"original":{"line":12,"column":0},"generated":{"line":1,"column":872}},{"source":"compiler/compileRunner.ts","name":null,"original":{"line":12,"column":0},"generated":{"line":1,"column":885}},{"source":"compiler/compileRunner.ts","name":null,"original":{"line":12,"column":0},"generated":{"line":1,"column":888}},{"source":"compiler/compileRunner.ts","name":null,"original":{"line":12,"column":0},"generated":{"line":1,"column":892}},{"source":"compiler/compileRunner.ts","name":null,"original":{"line":12,"column":0},"generated":{"line":1,"column":894}},{"source":"compiler/compileRunner.ts","name":null,"original":{"line":12,"column":0},"generated":{"line":1,"column":903}},{"source":"compiler/compileRunner.ts","name":null,"original":{"line":12,"column":0},"generated":{"line":1,"column":906}},{"source":"compiler/compileRunner.ts","name":null,"original":{"line":12,"column":0},"generated":{"line":1,"column":909}},{"source":"compiler/compileRunner.ts","name":null,"original":{"line":12,"column":0},"generated":{"line":1,"column":912}},{"source":"compiler/compileRunner.ts","name":null,"original":{"line":12,"column":0},"generated":{"line":1,"column":914}},{"source":"compiler/compileRunner.ts","name":null,"original":{"line":12,"column":0},"generated":{"line":1,"column":925}},{"source":"compiler/compileRunner.ts","name":null,"original":{"line":12,"column":0},"generated":{"line":1,"column":932}},{"source":"compiler/compileRunner.ts","name":null,"original":{"line":12,"column":0},"generated":{"line":1,"column":934}},{"source":"compiler/compileRunner.ts","name":null,"original":{"line":12,"column":0},"generated":{"line":1,"column":938}},{"source":"compiler/compileRunner.ts","name":null,"original":{"line":12,"column":0},"generated":{"line":1,"column":940}},{"source":"compiler/compileRunner.ts","name":null,"original":{"line":12,"column":0},"generated":{"line":1,"column":943}},{"source":"compiler/compileRunner.ts","name":null,"original":{"line":12,"column":0},"generated":{"line":1,"column":946}},{"source":"compiler/compileRunner.ts","name":null,"original":{"line":12,"column":0},"generated":{"line":1,"column":952}},{"source":"compiler/compileRunner.ts","name":null,"original":{"line":12,"column":0},"generated":{"line":1,"column":954}},{"source":"compiler/compileRunner.ts","name":null,"original":{"line":12,"column":0},"generated":{"line":1,"column":958}},{"source":"compiler/compileRunner.ts","name":null,"original":{"line":12,"column":0},"generated":{"line":1,"column":962}},{"source":"compiler/compileRunner.ts","name":null,"original":{"line":12,"column":0},"generated":{"line":1,"column":967}},{"source":"compiler/compileRunner.ts","name":null,"original":{"line":12,"column":0},"generated":{"line":1,"column":969}},{"source":"compiler/compileRunner.ts","name":null,"original":{"line":12,"column":0},"generated":{"line":1,"column":976}},{"source":"compiler/compileRunner.ts","name":null,"original":{"line":12,"column":0},"generated":{"line":1,"column":991}},{"source":"compiler/compileRunner.ts","name":null,"original":{"line":12,"column":0},"generated":{"line":1,"column":996}},{"source":"compiler/compileRunner.ts","name":null,"original":{"line":12,"column":0},"generated":{"line":1,"column":998}},{"source":"compiler/compileRunner.ts","name":null,"original":{"line":12,"column":0},"generated":{"line":1,"column":1003}},{"source":"compiler/compileRunner.ts","name":null,"original":{"line":12,"column":0},"generated":{"line":1,"column":1005}},{"source":"compiler/compileRunner.ts","name":null,"original":{"line":12,"column":0},"generated":{"line":1,"column":1008}},{"source":"compiler/compileRunner.ts","name":null,"original":{"line":12,"column":0},"generated":{"line":1,"column":1010}},{"source":"compiler/compileRunner.ts","name":null,"original":{"line":12,"column":0},"generated":{"line":1,"column":1014}},{"source":"compiler/compileRunner.ts","name":null,"original":{"line":12,"column":0},"generated":{"line":1,"column":1021}},{"source":"compiler/compileRunner.ts","name":null,"original":{"line":12,"column":0},"generated":{"line":1,"column":1023}},{"source":"compiler/compileRunner.ts","name":null,"original":{"line":12,"column":0},"generated":{"line":1,"column":1031}},{"source":"compiler/compileRunner.ts","name":null,"original":{"line":12,"column":0},"generated":{"line":1,"column":1033}},{"source":"compiler/compileRunner.ts","name":null,"original":{"line":12,"column":0},"generated":{"line":1,"column":1036}},{"source":"compiler/compileRunner.ts","name":null,"original":{"line":12,"column":0},"generated":{"line":1,"column":1043}},{"source":"compiler/compileRunner.ts","name":null,"original":{"line":12,"column":0},"generated":{"line":1,"column":1058}},{"source":"compiler/compileRunner.ts","name":null,"original":{"line":12,"column":0},"generated":{"line":1,"column":1066}},{"source":"compiler/compileRunner.ts","name":null,"original":{"line":12,"column":0},"generated":{"line":1,"column":1079}},{"source":"compiler/compileRunner.ts","name":null,"original":{"line":12,"column":0},"generated":{"line":1,"column":1080}},{"source":"compiler/compileRunner.ts","name":null,"original":{"line":12,"column":0},"generated":{"line":1,"column":1087}},{"source":"compiler/compileRunner.ts","name":null,"original":{"line":1,"column":0},"generated":{"line":1,"column":1091}},{"source":"compiler/compileRunner.ts","name":null,"original":{"line":1,"column":0},"generated":{"line":1,"column":1097}},{"source":"compiler/compileRunner.ts","name":null,"original":{"line":1,"column":0},"generated":{"line":1,"column":1099}},{"source":"compiler/compileRunner.ts","name":null,"original":{"line":1,"column":0},"generated":{"line":1,"column":1107}},{"source":"compiler/compileRunner.ts","name":null,"original":{"line":4,"column":0},"generated":{"line":1,"column":1115}},{"source":"compiler/compileRunner.ts","name":null,"original":{"line":4,"column":0},"generated":{"line":1,"column":1117}},{"source":"compiler/compileRunner.ts","name":null,"original":{"line":4,"column":0},"generated":{"line":1,"column":1125}},{"source":"compiler/compileRunner.ts","name":null,"original":{"line":5,"column":0},"generated":{"line":1,"column":1152}},{"source":"compiler/compileRunner.ts","name":null,"original":{"line":5,"column":0},"generated":{"line":1,"column":1154}},{"source":"compiler/compileRunner.ts","name":null,"original":{"line":5,"column":0},"generated":{"line":1,"column":1162}},{"source":"compiler/compileRunner.ts","name":null,"original":{"line":6,"column":0},"generated":{"line":1,"column":1168}},{"source":"compiler/compileRunner.ts","name":null,"original":{"line":6,"column":0},"generated":{"line":1,"column":1170}},{"source":"compiler/compileRunner.ts","name":null,"original":{"line":6,"column":0},"generated":{"line":1,"column":1178}},{"source":"compiler/compileRunner.ts","name":null,"original":{"line":7,"column":0},"generated":{"line":1,"column":1188}},{"source":"compiler/compileRunner.ts","name":null,"original":{"line":7,"column":0},"generated":{"line":1,"column":1190}},{"source":"compiler/compileRunner.ts","name":null,"original":{"line":7,"column":0},"generated":{"line":1,"column":1192}},{"source":"compiler/compileRunner.ts","name":null,"original":{"line":7,"column":0},"generated":{"line":1,"column":1200}},{"source":"compiler/compileRunner.ts","name":null,"original":{"line":8,"column":0},"generated":{"line":1,"column":1209}},{"source":"compiler/compileRunner.ts","name":null,"original":{"line":8,"column":0},"generated":{"line":1,"column":1211}},{"source":"compiler/compileRunner.ts","name":null,"original":{"line":8,"column":0},"generated":{"line":1,"column":1219}},{"source":"compiler/compileRunner.ts","name":null,"original":{"line":10,"column":6},"generated":{"line":1,"column":1236}},{"source":"compiler/compileRunner.ts","name":null,"original":{"line":10,"column":16},"generated":{"line":1,"column":1238}},{"source":"compiler/compileRunner.ts","name":null,"original":{"line":10,"column":24},"generated":{"line":1,"column":1246}},{"source":"compiler/compileRunner.ts","name":null,"original":{"line":12,"column":0},"generated":{"line":1,"column":1257}},{"source":"compiler/compileRunner.ts","name":null,"original":{"line":12,"column":0},"generated":{"line":1,"column":1265}},{"source":"compiler/compileRunner.ts","name":null,"original":{"line":12,"column":0},"generated":{"line":1,"column":1280}}],"sources":{"compiler/compileRunner.ts":"import P = require(\"pino\");\nimport {Swagger} from \"../server/swagger\";\nimport {ICompilerOptions} from \"./compilerheaders\";\nimport {VALORYLOGGERVAR, VALORYPRETTYLOGGERVAR} from \"../server/valoryheaders\";\nimport {existsSync, mkdirSync, writeFileSync} from \"fs\";\nimport {cloneDeep, omit} from \"lodash\";\nimport * as path from \"path\";\nimport {Config} from \"../lib/config\";\n\nconst hyperid = require(\"hyperid\");\n\nexport async function compileAndSave(swagger: Swagger.Spec, compilePath: string, additionalPath: string\n    , undocumentedPaths: string[], compilerOptions: ICompilerOptions, debugPath?: string) {\n    const compiled = await require(\"./compiler\").compile(swagger, compilerOptions);\n    const Logger = P({\n        level: process.env[VALORYLOGGERVAR] || \"info\",\n        prettyPrint: process.env[VALORYPRETTYLOGGERVAR] === \"true\",\n    });\n    Logger.debug(\"Saving compiled swagger to: \" + compilePath);\n    writeFileSync(compilePath, compiled.module);\n    const trimmedSpec = cloneDeep(swagger);\n    trimmedSpec.paths = omit(trimmedSpec.paths, undocumentedPaths);\n    if (debugPath != null) {\n        if (!existsSync(debugPath)) {\n            mkdirSync(debugPath);\n        }\n        const id = Buffer.from(hyperid()()).toString(\"base64\");\n        mkdirSync(path.join(debugPath, id));\n        Logger.info(\"Placing additional debug artifacts in:\", path.join(debugPath, id));\n        for (const name of Object.keys(compiled.debugArtifacts)) {\n            const item = compiled.debugArtifacts[name];\n            if (typeof item === \"string\") {\n                writeFileSync(path.join(debugPath, id, name + \".js\"), item);\n            }\n        }\n    }\n    writeFileSync(Config.SwaggerPath, JSON.stringify(trimmedSpec));\n    writeFileSync(path.join(additionalPath, Config.SWAGGER_FILE), JSON.stringify(trimmedSpec));\n}\n"},"lineCount":null}},"hash":"f2afb1a7c46b1b368a6bf5a2bb4039e1","cacheData":{"env":{}}}