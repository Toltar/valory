{"id":"FWCk","dependencies":[{"name":"/home/john/workspace/Valory2/tsconfig.json","includedInParent":true,"mtime":1533665526367},{"name":"/home/john/workspace/Valory2/package.json","includedInParent":true,"mtime":1533666443092},{"name":"/home/john/workspace/Valory2/.babelrc","includedInParent":true,"mtime":1533664058125}],"generated":{"js":"\"use strict\";Object.defineProperty(exports,\"__esModule\",{value:!0});const e=require(\"lodash\"),r=require(\"fast-json-stable-stringify\");function s(r,s,i,t){const a={properties:{},required:[],type:\"object\"};return e.each(r.parameters,e=>{switch(e.in){case\"body\":a.properties.body=e.schema,a.required||(a.required=[]),a.required.push(\"body\");break;case\"header\":e.name=e.name.toLowerCase();case\"formData\":case\"query\":case\"path\":(e=>{const r=t[e.in];let s=a.properties[r];const i={};s||(s=a.properties[r]={properties:{},required:void 0,type:\"object\"}),s.properties[e.name]=i;for(const r of Object.keys(e))switch(r){case\"description\":case\"in\":case\"name\":case\"required\":break;default:i[r]=e[r]}e.required&&(null==s.required&&(s.required=[]),s.required.indexOf(e.name)&&s.required.push(e.name),null==a.required&&(a.required=[]),a.required.indexOf(r)<0&&a.required.push(r))})(e)}}),a}exports.compileMethodSchema=s;","map":{"mappings":[{"source":"compiler/method.ts","name":null,"original":{"line":12,"column":0},"generated":{"line":1,"column":0}},{"source":"compiler/method.ts","name":null,"original":{"line":12,"column":0},"generated":{"line":1,"column":13}},{"source":"compiler/method.ts","name":null,"original":{"line":12,"column":0},"generated":{"line":1,"column":20}},{"source":"compiler/method.ts","name":null,"original":{"line":12,"column":0},"generated":{"line":1,"column":35}},{"source":"compiler/method.ts","name":null,"original":{"line":12,"column":0},"generated":{"line":1,"column":43}},{"source":"compiler/method.ts","name":null,"original":{"line":12,"column":0},"generated":{"line":1,"column":56}},{"source":"compiler/method.ts","name":null,"original":{"line":12,"column":0},"generated":{"line":1,"column":57}},{"source":"compiler/method.ts","name":null,"original":{"line":12,"column":0},"generated":{"line":1,"column":64}},{"source":"compiler/method.ts","name":null,"original":{"line":1,"column":0},"generated":{"line":1,"column":68}},{"source":"compiler/method.ts","name":null,"original":{"line":1,"column":0},"generated":{"line":1,"column":74}},{"source":"compiler/method.ts","name":null,"original":{"line":1,"column":0},"generated":{"line":1,"column":76}},{"source":"compiler/method.ts","name":null,"original":{"line":1,"column":0},"generated":{"line":1,"column":84}},{"source":"compiler/method.ts","name":null,"original":{"line":5,"column":6},"generated":{"line":1,"column":94}},{"source":"compiler/method.ts","name":null,"original":{"line":5,"column":18},"generated":{"line":1,"column":96}},{"source":"compiler/method.ts","name":null,"original":{"line":5,"column":26},"generated":{"line":1,"column":104}},{"source":"compiler/method.ts","name":null,"original":{"line":12,"column":0},"generated":{"line":1,"column":134}},{"source":"compiler/method.ts","name":null,"original":{"line":12,"column":0},"generated":{"line":1,"column":143}},{"source":"compiler/method.ts","name":null,"original":{"line":12,"column":36},"generated":{"line":1,"column":145}},{"source":"compiler/method.ts","name":null,"original":{"line":12,"column":66},"generated":{"line":1,"column":147}},{"source":"compiler/method.ts","name":null,"original":{"line":12,"column":82},"generated":{"line":1,"column":149}},{"source":"compiler/method.ts","name":null,"original":{"line":13,"column":9},"generated":{"line":1,"column":151}},{"source":"compiler/method.ts","name":null,"original":{"line":14,"column":7},"generated":{"line":1,"column":154}},{"source":"compiler/method.ts","name":null,"original":{"line":14,"column":7},"generated":{"line":1,"column":160}},{"source":"compiler/method.ts","name":null,"original":{"line":14,"column":32},"generated":{"line":1,"column":162}},{"source":"compiler/method.ts","name":null,"original":{"line":15,"column":14},"generated":{"line":1,"column":163}},{"source":"compiler/method.ts","name":null,"original":{"line":15,"column":14},"generated":{"line":1,"column":174}},{"source":"compiler/method.ts","name":null,"original":{"line":16,"column":12},"generated":{"line":1,"column":177}},{"source":"compiler/method.ts","name":null,"original":{"line":16,"column":12},"generated":{"line":1,"column":186}},{"source":"compiler/method.ts","name":null,"original":{"line":17,"column":8},"generated":{"line":1,"column":189}},{"source":"compiler/method.ts","name":null,"original":{"line":17,"column":8},"generated":{"line":1,"column":194}},{"source":"compiler/method.ts","name":null,"original":{"line":76,"column":8},"generated":{"line":1,"column":204}},{"source":"compiler/method.ts","name":null,"original":{"line":58,"column":1},"generated":{"line":1,"column":211}},{"source":"compiler/method.ts","name":null,"original":{"line":58,"column":1},"generated":{"line":1,"column":213}},{"source":"compiler/method.ts","name":null,"original":{"line":58,"column":6},"generated":{"line":1,"column":218}},{"source":"compiler/method.ts","name":null,"original":{"line":58,"column":16},"generated":{"line":1,"column":220}},{"source":"compiler/method.ts","name":null,"original":{"line":58,"column":29},"generated":{"line":1,"column":231}},{"source":"compiler/method.ts","name":null,"original":{"line":59,"column":11},"generated":{"line":1,"column":235}},{"source":"compiler/method.ts","name":null,"original":{"line":59,"column":11},"generated":{"line":1,"column":242}},{"source":"compiler/method.ts","name":null,"original":{"line":59,"column":47},"generated":{"line":1,"column":244}},{"source":"compiler/method.ts","name":null,"original":{"line":60,"column":8},"generated":{"line":1,"column":248}},{"source":"compiler/method.ts","name":null,"original":{"line":60,"column":8},"generated":{"line":1,"column":252}},{"source":"compiler/method.ts","name":null,"original":{"line":61,"column":11},"generated":{"line":1,"column":259}},{"source":"compiler/method.ts","name":null,"original":{"line":61,"column":11},"generated":{"line":1,"column":261}},{"source":"compiler/method.ts","name":null,"original":{"line":61,"column":22},"generated":{"line":1,"column":272}},{"source":"compiler/method.ts","name":null,"original":{"line":61,"column":30},"generated":{"line":1,"column":277}},{"source":"compiler/method.ts","name":null,"original":{"line":61,"column":66},"generated":{"line":1,"column":279}},{"source":"compiler/method.ts","name":null,"original":{"line":62,"column":9},"generated":{"line":1,"column":286}},{"source":"compiler/method.ts","name":null,"original":{"line":62,"column":16},"generated":{"line":1,"column":288}},{"source":"compiler/method.ts","name":null,"original":{"line":63,"column":12},"generated":{"line":1,"column":299}},{"source":"compiler/method.ts","name":null,"original":{"line":63,"column":12},"generated":{"line":1,"column":301}},{"source":"compiler/method.ts","name":null,"original":{"line":63,"column":23},"generated":{"line":1,"column":310}},{"source":"compiler/method.ts","name":null,"original":{"line":65,"column":11},"generated":{"line":1,"column":314}},{"source":"compiler/method.ts","name":null,"original":{"line":65,"column":11},"generated":{"line":1,"column":316}},{"source":"compiler/method.ts","name":null,"original":{"line":65,"column":20},"generated":{"line":1,"column":325}},{"source":"compiler/method.ts","name":null,"original":{"line":65,"column":25},"generated":{"line":1,"column":330}},{"source":"compiler/method.ts","name":null,"original":{"line":66,"column":4},"generated":{"line":1,"column":338}},{"source":"compiler/method.ts","name":null,"original":{"line":67,"column":8},"generated":{"line":1,"column":344}},{"source":"compiler/method.ts","name":null,"original":{"line":67,"column":8},"generated":{"line":1,"column":348}},{"source":"compiler/method.ts","name":null,"original":{"line":68,"column":41},"generated":{"line":1,"column":357}},{"source":"compiler/method.ts","name":null,"original":{"line":68,"column":41},"generated":{"line":1,"column":359}},{"source":"compiler/method.ts","name":null,"original":{"line":68,"column":49},"generated":{"line":1,"column":364}},{"source":"compiler/method.ts","name":null,"original":{"line":68,"column":85},"generated":{"line":1,"column":366}},{"source":"compiler/method.ts","name":null,"original":{"line":68,"column":90},"generated":{"line":1,"column":371}},{"source":"compiler/method.ts","name":null,"original":{"line":69,"column":8},"generated":{"line":1,"column":385}},{"source":"compiler/method.ts","name":null,"original":{"line":69,"column":8},"generated":{"line":1,"column":389}},{"source":"compiler/method.ts","name":null,"original":{"line":70,"column":8},"generated":{"line":1,"column":400}},{"source":"compiler/method.ts","name":null,"original":{"line":70,"column":8},"generated":{"line":1,"column":404}},{"source":"compiler/method.ts","name":null,"original":{"line":71,"column":8},"generated":{"line":1,"column":412}},{"source":"compiler/method.ts","name":null,"original":{"line":71,"column":8},"generated":{"line":1,"column":416}},{"source":"compiler/method.ts","name":null,"original":{"line":19,"column":22},"generated":{"line":1,"column":423}},{"source":"compiler/method.ts","name":null,"original":{"line":19,"column":22},"generated":{"line":1,"column":424}},{"source":"compiler/method.ts","name":null,"original":{"line":20,"column":8},"generated":{"line":1,"column":428}},{"source":"compiler/method.ts","name":null,"original":{"line":20,"column":8},"generated":{"line":1,"column":434}},{"source":"compiler/method.ts","name":null,"original":{"line":20,"column":23},"generated":{"line":1,"column":436}},{"source":"compiler/method.ts","name":null,"original":{"line":20,"column":40},"generated":{"line":1,"column":438}},{"source":"compiler/method.ts","name":null,"original":{"line":20,"column":46},"generated":{"line":1,"column":440}},{"source":"compiler/method.ts","name":null,"original":{"line":21,"column":6},"generated":{"line":1,"column":444}},{"source":"compiler/method.ts","name":null,"original":{"line":21,"column":6},"generated":{"line":1,"column":448}},{"source":"compiler/method.ts","name":null,"original":{"line":21,"column":24},"generated":{"line":1,"column":450}},{"source":"compiler/method.ts","name":null,"original":{"line":21,"column":31},"generated":{"line":1,"column":452}},{"source":"compiler/method.ts","name":null,"original":{"line":21,"column":42},"generated":{"line":1,"column":463}},{"source":"compiler/method.ts","name":null,"original":{"line":22,"column":8},"generated":{"line":1,"column":466}},{"source":"compiler/method.ts","name":null,"original":{"line":22,"column":8},"generated":{"line":1,"column":472}},{"source":"compiler/method.ts","name":null,"original":{"line":22,"column":20},"generated":{"line":1,"column":474}},{"source":"compiler/method.ts","name":null,"original":{"line":23,"column":7},"generated":{"line":1,"column":477}},{"source":"compiler/method.ts","name":null,"original":{"line":24,"column":21},"generated":{"line":1,"column":481}},{"source":"compiler/method.ts","name":null,"original":{"line":24,"column":21},"generated":{"line":1,"column":483}},{"source":"compiler/method.ts","name":null,"original":{"line":24,"column":28},"generated":{"line":1,"column":485}},{"source":"compiler/method.ts","name":null,"original":{"line":24,"column":39},"generated":{"line":1,"column":496}},{"source":"compiler/method.ts","name":null,"original":{"line":24,"column":55},"generated":{"line":1,"column":499}},{"source":"compiler/method.ts","name":null,"original":{"line":25,"column":16},"generated":{"line":1,"column":500}},{"source":"compiler/method.ts","name":null,"original":{"line":25,"column":16},"generated":{"line":1,"column":511}},{"source":"compiler/method.ts","name":null,"original":{"line":26,"column":14},"generated":{"line":1,"column":514}},{"source":"compiler/method.ts","name":null,"original":{"line":26,"column":14},"generated":{"line":1,"column":528}},{"source":"compiler/method.ts","name":null,"original":{"line":27,"column":10},"generated":{"line":1,"column":530}},{"source":"compiler/method.ts","name":null,"original":{"line":27,"column":10},"generated":{"line":1,"column":535}},{"source":"compiler/method.ts","name":null,"original":{"line":30,"column":18},"generated":{"line":1,"column":546}},{"source":"compiler/method.ts","name":null,"original":{"line":30,"column":18},"generated":{"line":1,"column":548}},{"source":"compiler/method.ts","name":null,"original":{"line":30,"column":29},"generated":{"line":1,"column":559}},{"source":"compiler/method.ts","name":null,"original":{"line":30,"column":35},"generated":{"line":1,"column":561}},{"source":"compiler/method.ts","name":null,"original":{"line":30,"column":43},"generated":{"line":1,"column":567}},{"source":"compiler/method.ts","name":null,"original":{"line":31,"column":7},"generated":{"line":1,"column":569}},{"source":"compiler/method.ts","name":null,"original":{"line":31,"column":7},"generated":{"line":1,"column":573}},{"source":"compiler/method.ts","name":null,"original":{"line":31,"column":13},"generated":{"line":1,"column":579}},{"source":"compiler/method.ts","name":null,"original":{"line":31,"column":20},"generated":{"line":1,"column":584}},{"source":"compiler/method.ts","name":null,"original":{"line":31,"column":27},"generated":{"line":1,"column":591}},{"source":"compiler/method.ts","name":null,"original":{"line":31,"column":32},"generated":{"line":1,"column":596}},{"source":"compiler/method.ts","name":null,"original":{"line":32,"column":11},"generated":{"line":1,"column":599}},{"source":"compiler/method.ts","name":null,"original":{"line":32,"column":11},"generated":{"line":1,"column":606}},{"source":"compiler/method.ts","name":null,"original":{"line":33,"column":9},"generated":{"line":1,"column":609}},{"source":"compiler/method.ts","name":null,"original":{"line":33,"column":9},"generated":{"line":1,"column":613}},{"source":"compiler/method.ts","name":null,"original":{"line":34,"column":9},"generated":{"line":1,"column":627}},{"source":"compiler/method.ts","name":null,"original":{"line":34,"column":9},"generated":{"line":1,"column":631}},{"source":"compiler/method.ts","name":null,"original":{"line":35,"column":9},"generated":{"line":1,"column":636}},{"source":"compiler/method.ts","name":null,"original":{"line":35,"column":9},"generated":{"line":1,"column":640}},{"source":"compiler/method.ts","name":null,"original":{"line":36,"column":9},"generated":{"line":1,"column":647}},{"source":"compiler/method.ts","name":null,"original":{"line":36,"column":9},"generated":{"line":1,"column":651}},{"source":"compiler/method.ts","name":null,"original":{"line":37,"column":5},"generated":{"line":1,"column":662}},{"source":"compiler/method.ts","name":null,"original":{"line":38,"column":4},"generated":{"line":1,"column":668}},{"source":"compiler/method.ts","name":null,"original":{"line":39,"column":10},"generated":{"line":1,"column":676}},{"source":"compiler/method.ts","name":null,"original":{"line":39,"column":10},"generated":{"line":1,"column":678}},{"source":"compiler/method.ts","name":null,"original":{"line":39,"column":18},"generated":{"line":1,"column":681}},{"source":"compiler/method.ts","name":null,"original":{"line":39,"column":32},"generated":{"line":1,"column":683}},{"source":"compiler/method.ts","name":null,"original":{"line":42,"column":6},"generated":{"line":1,"column":686}},{"source":"compiler/method.ts","name":null,"original":{"line":42,"column":12},"generated":{"line":1,"column":688}},{"source":"compiler/method.ts","name":null,"original":{"line":43,"column":35},"generated":{"line":1,"column":699}},{"source":"compiler/method.ts","name":null,"original":{"line":43,"column":7},"generated":{"line":1,"column":705}},{"source":"compiler/method.ts","name":null,"original":{"line":43,"column":23},"generated":{"line":1,"column":707}},{"source":"compiler/method.ts","name":null,"original":{"line":44,"column":20},"generated":{"line":1,"column":718}},{"source":"compiler/method.ts","name":null,"original":{"line":44,"column":20},"generated":{"line":1,"column":720}},{"source":"compiler/method.ts","name":null,"original":{"line":44,"column":31},"generated":{"line":1,"column":729}},{"source":"compiler/method.ts","name":null,"original":{"line":46,"column":7},"generated":{"line":1,"column":733}},{"source":"compiler/method.ts","name":null,"original":{"line":46,"column":23},"generated":{"line":1,"column":735}},{"source":"compiler/method.ts","name":null,"original":{"line":46,"column":32},"generated":{"line":1,"column":744}},{"source":"compiler/method.ts","name":null,"original":{"line":46,"column":40},"generated":{"line":1,"column":752}},{"source":"compiler/method.ts","name":null,"original":{"line":46,"column":46},"generated":{"line":1,"column":754}},{"source":"compiler/method.ts","name":null,"original":{"line":47,"column":20},"generated":{"line":1,"column":761}},{"source":"compiler/method.ts","name":null,"original":{"line":47,"column":20},"generated":{"line":1,"column":763}},{"source":"compiler/method.ts","name":null,"original":{"line":47,"column":29},"generated":{"line":1,"column":772}},{"source":"compiler/method.ts","name":null,"original":{"line":47,"column":34},"generated":{"line":1,"column":777}},{"source":"compiler/method.ts","name":null,"original":{"line":47,"column":40},"generated":{"line":1,"column":779}},{"source":"compiler/method.ts","name":null,"original":{"line":49,"column":26},"generated":{"line":1,"column":785}},{"source":"compiler/method.ts","name":null,"original":{"line":49,"column":7},"generated":{"line":1,"column":791}},{"source":"compiler/method.ts","name":null,"original":{"line":49,"column":14},"generated":{"line":1,"column":793}},{"source":"compiler/method.ts","name":null,"original":{"line":50,"column":11},"generated":{"line":1,"column":804}},{"source":"compiler/method.ts","name":null,"original":{"line":50,"column":11},"generated":{"line":1,"column":806}},{"source":"compiler/method.ts","name":null,"original":{"line":50,"column":22},"generated":{"line":1,"column":815}},{"source":"compiler/method.ts","name":null,"original":{"line":52,"column":7},"generated":{"line":1,"column":819}},{"source":"compiler/method.ts","name":null,"original":{"line":52,"column":14},"generated":{"line":1,"column":821}},{"source":"compiler/method.ts","name":null,"original":{"line":52,"column":23},"generated":{"line":1,"column":830}},{"source":"compiler/method.ts","name":null,"original":{"line":52,"column":31},"generated":{"line":1,"column":838}},{"source":"compiler/method.ts","name":null,"original":{"line":52,"column":47},"generated":{"line":1,"column":841}},{"source":"compiler/method.ts","name":null,"original":{"line":53,"column":11},"generated":{"line":1,"column":844}},{"source":"compiler/method.ts","name":null,"original":{"line":53,"column":11},"generated":{"line":1,"column":846}},{"source":"compiler/method.ts","name":null,"original":{"line":53,"column":20},"generated":{"line":1,"column":855}},{"source":"compiler/method.ts","name":null,"original":{"line":53,"column":25},"generated":{"line":1,"column":860}},{"source":"compiler/method.ts","name":null,"original":{"line":72,"column":17},"generated":{"line":1,"column":865}},{"source":"compiler/method.ts","name":null,"original":{"line":72,"column":17},"generated":{"line":1,"column":866}},{"source":"compiler/method.ts","name":null,"original":{"line":76,"column":8},"generated":{"line":1,"column":872}},{"source":"compiler/method.ts","name":null,"original":{"line":12,"column":0},"generated":{"line":1,"column":874}},{"source":"compiler/method.ts","name":null,"original":{"line":12,"column":0},"generated":{"line":1,"column":882}},{"source":"compiler/method.ts","name":null,"original":{"line":12,"column":0},"generated":{"line":1,"column":902}}],"sources":{"compiler/method.ts":"import {each} from \"lodash\";\nimport {ExtendedSchema, RequestFieldMap} from \"./compilerheaders\";\nimport {Swagger} from \"../server/swagger\";\n\nconst stringify = require(\"fast-json-stable-stringify\");\n\nexport interface MethodOutput {\n\tschema: Swagger.Schema;\n\thash: string;\n}\n\nexport function compileMethodSchema(operation: Swagger.Operation, method: string, pathName: string,\n\t\t\t\t\t\t\t\t\trequestObjectMap: RequestFieldMap): Swagger.Schema {\n\tconst schema: ExtendedSchema = {\n\t\tproperties: {},\n\t\trequired: [],\n\t\ttype: \"object\",\n\t};\n\tconst addProperty = (param: Swagger.Parameter) => {\n\t\tconst requestField = requestObjectMap[param.in];\n\t\tlet requestFieldObj = schema.properties[requestField];\n\t\tconst prop: any = {};\n\t\tif (!requestFieldObj) {\n\t\t\trequestFieldObj = schema.properties[requestField] = {\n\t\t\t\tproperties: {},\n\t\t\t\trequired: undefined,\n\t\t\t\ttype: \"object\",\n\t\t\t};\n\t\t}\n\t\trequestFieldObj.properties[param.name] = prop;\n\t\tfor (const key of Object.keys(param)) {\n\t\t\tswitch (key) {\n\t\t\t\tcase \"description\":\n\t\t\t\tcase \"in\":\n\t\t\t\tcase \"name\":\n\t\t\t\tcase \"required\":\n\t\t\t\t\tbreak;\n\t\t\t\tdefault:\n\t\t\t\t\tprop[key] = (param as any)[key];\n\t\t\t}\n\t\t}\n\t\tif (param.required) {\n\t\t\tif (requestFieldObj.required == null) {\n\t\t\t\trequestFieldObj.required = [];\n\t\t\t}\n\t\t\tif (requestFieldObj.required.indexOf(param.name)) {\n\t\t\t\trequestFieldObj.required.push(param.name);\n\t\t\t}\n\t\t\tif (schema.required == null) {\n\t\t\t\tschema.required = [];\n\t\t\t}\n\t\t\tif (schema.required.indexOf(requestField) < 0) {\n\t\t\t\tschema.required.push(requestField);\n\t\t\t}\n\t\t}\n\t};\n\n\teach(operation.parameters, (parameter) => {\n\t\tswitch ((parameter as Swagger.BaseParameter).in) {\n\t\t\tcase \"body\":\n\t\t\t\tschema.properties.body = (parameter as Swagger.BodyParameter).schema;\n\t\t\t\tif (!schema.required) {\n\t\t\t\t\tschema.required = [];\n\t\t\t\t}\n\t\t\t\tschema.required.push(\"body\");\n\t\t\t\tbreak;\n\t\t\tcase \"header\":\n\t\t\t\t(parameter as Swagger.BaseParameter).name = (parameter as Swagger.BaseParameter).name.toLowerCase();\n\t\t\tcase \"formData\":\n\t\t\tcase \"query\":\n\t\t\tcase \"path\":\n\t\t\t\taddProperty((parameter as any));\n\t\t}\n\t});\n\n\treturn schema;\n}\n"},"lineCount":null}},"hash":"600e8db2a44eaace49f07736542397fe","cacheData":{"env":{}}}